function get_array_for_checkboxes_with_name(e){for(var a,t=[],n=document.getElementsByName(e),o=0;a=n[o];o++)1==a.checked&&t.push(a.value);return t}function trig_bind(){$("input[type='checkbox']").unbind("click"),$("input[type='radio']").unbind("click"),$("input[type='checkbox']").bind("click",function(){$(this).trigger("change")}),$("input[type='radio']").bind("click",function(){$(this).trigger("change")})}function actualizarInformacionReserva(e,a){var t,n,o,r,i;a=a||0,t=$("#adultos").val(),n=$("#ninos").val(),o=parseInt(t)+parseInt(n),r=$('#fOculto input[name="totalCasa"]').val(),i=$('#fOculto input[name="minCasa"]').val(),r<o?($(".mensaje-error").show(),$(".seguir").attr("disabled",!0),$(".mensaje-minpersons").hide()):o<i?($(".mensaje-minpersons").show(),$(".mensaje-error").hide()):($(".mensaje-error").hide(),$(".mensaje-minpersons").hide(),$(".seguir").attr("disabled",!1)),ajax3=nuevoAjax(),ajax3.open("POST","reserva-form.php",!0),ajax3.onreadystatechange=function(){4==ajax3.readyState&&$("#resultado_reserva").html(ajax3.responseText)},ajax3.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),ajax3.send("totalPersonas="+o+"&tid="+e+"&adultos="+t+"&ninos="+n+"&resultado="+a)}function ConsultarDisponibilidad(){var e,a,t,n,o,r;trig_bind(),r=document.getElementById("resultado"),e=document.getElementById("from").value,a=document.getElementById("to").value,t=document.getElementById("reserva-persons").value,rooms=get_array_for_checkboxes_with_name("rooms[]"),n=document.getElementById("reserva-tipo").value,o=document.getElementById("reserva-eid").value,pvid=document.getElementById("reserva-pvid").value,ajax=nuevoAjax(),ajax.open("POST","disponibilidad.php",!0),ajax.onreadystatechange=function(){4==ajax.readyState&&(r.innerHTML=ajax.responseText,2==n&&""!=e&&""!=a&&(bestprice(e,a,o,t),avisoPersonas(e,a,o)))},ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),ajax.send("datein="+e+"&dateout="+a+"&persons="+t+"&rooms="+rooms+"&tipo="+n+"&eid="+o+"&pvid="+pvid)}function avisoPersonas(e,a,t){ajax=nuevoAjax(),ajax.open("POST","aviso-fecha.php",!0),mensaje="",ajax.onreadystatechange=function(){4==ajax.readyState&&(resultado=ajax.responseText,partido=resultado.split("/"),""!=resultado?($(".aviso-mensaje").css("display","block"),$(".de").html(partido[0]),$(".a").html(partido[1]),$(".noches").html(partido[2]),0!=partido[3]?$(".entrada").html(partido[3]):$(".no-entrada").hide(),0!=partido[4]?$(".salida").html(partido[4]):$(".no-salida").hide()):$(".aviso-mensaje").hide())},ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),ajax.send("datein="+e+"&dateout="+a+"&eid="+t)}function bestprice(e,a,t,n){var o=$(".total").text().split("â‚¬"),r=parseFloat(o[0]);isNaN(r)&&(r=0),ajax2=nuevoAjax(),ajax2.open("POST","bestprice.php",!0),ajax2.onreadystatechange=function(){4==ajax2.readyState&&($("#precio").html(ajax2.responseText),$("#descripcion_tipo_precio").length&&($(".text-price").html($("#descripcion_tipo_precio").val()),$(".mobile-book-text").html($("#descripcion_tipo_precio").val())),$(".mobile-book-price span[itemprop='price']").html(ajax2.responseText))},ajax2.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),ajax2.send("datein="+e+"&dateout="+a+"&total="+r+"&id="+t+"&persons="+n)}function CalculoReserva(){var e,a,t,n,o;trig_bind(),o=document.getElementById("reserva_calculo"),e=document.getElementById("from").value,a=document.getElementById("to").value,rooms=get_array_for_checkboxes_with_name("rooms[]"),t=document.getElementById("reserva-tipo").value,n=document.getElementById("reserva-eid").value,ajax=nuevoAjax(),ajax.open("POST","calculoreserva.php",!0),ajax.onreadystatechange=function(){4==ajax.readyState&&(o.innerHTML=ajax.responseText)},ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),ajax.send("datein="+e+"&dateout="+a+"&rooms="+rooms+"&tipo="+t+"&eid="+n)}function nuevoAjax(){var a=!1;try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){a=!1}}return a||"undefined"==typeof XMLHttpRequest||(a=new XMLHttpRequest),a}